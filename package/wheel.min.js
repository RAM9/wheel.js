var Wheel={Class:function(){},Mixins:{},Widgeteria:{}};(function(){var a=function(a,b){for(prop in b){if(prop.match(/prototype|arguments|__proto__/))return;a[prop]&&typeof b[prop]=="function"&&/\b_super\b/.test(b[prop])?a[prop]=function(a,b,c){return function(){var a=this._super;this._super=c;var d=b.apply(this,arguments);return this._super=a,d}}(prop,b[prop],a[prop]):a[prop]=b[prop]}return a};Wheel.Class.mashin=function(b){var c;return a(this,b),this},Wheel.Class.mixin=function(b){var c;return a(this.prototype,b),this};var b=!1;Wheel.Class.subclass=function(c,d){function f(){!b&&this.initialize&&this.initialize.apply(this,arguments)}b=!0;var e=new this;b=!1;for(g in this){var g;if(g=="prototype")return;f[g]=this[g]}return f.mashin(d),f.prototype=a(e,c),f.superclass=this,f.prototype.constructor=f,f.prototype._class=f.prototype.constructor,f}})(),Wheel.Mixins.Ajax={init:function(){this._super(),this.httpMethod=this.httpMethod||"get",this.dataType=this.dataType||"json"},send:function(){this._super&&this._super();var a=this.data()||{},b=this.httpMethod;b.match(/delete|put/i)&&!a._method&&(a._method=b,b="post"),$.ajax({url:this.url,context:this,data:a,type:b,dataType:this.dataType,success:this.onSuccess,error:this.processError,complete:this.onCompletion})},processError:function(a){try{this.onError(JSON.parse(a.responseText))}catch(b){this.onError({status:a.statusCode(),message:a.responseText})}}},Wheel.Mixins.Optionize={optionize:function(a){var b;for(b in a)this[b]=a[b]}},Wheel.View=Wheel.Class.subclass({initialize:function(a,b){this.initializeDom(a,b),this.init(),this.listen()},initializeDom:function(a,b){a&&(a.addClass||a instanceof HTMLElement||a.toString()===a)?(this.optionize(b),this.$=this.wrapDom(a)):(this.optionize(a),this.$=this.render())},wrapDom:function(a){return $(a)},render:function(){var a=Mustache.render(this._class.template(),this.viewModel());return $(a)},viewModel:function(){var a;return this.model!=undefined?a=this.model:a=this,a},init:function(){},listen:function(){}},{gather:function(a,b){if(!this.cssSelector)throw"Define a cssSelector on the class to use the 'gather' class method";var c=[],d=this;return b=b||{},a=a instanceof $?a:$(a),a.is(this.cssSelector)?c.push(new d(a,b)):$.each(a.find(this.cssSelector),function(a,e){c.push(new d(e,b))}),c},assemble:function(a){var b=[];return klass=this,$.each(a,function(a,c){b.push(new klass(c))}),b}}),Wheel.View.mixin(Wheel.Mixins.Optionize),Wheel.Application=Wheel.Class.subclass({initialize:function(){var a=this._class.name;if(window[app])return;this.init(),window[app]=this},init:function(){}},{name:"WheelApp"}),Wheel.TouchManager=Wheel.View.subclass({initializeDom:function(a,b){this.optionize(b),this.base=a,this.$=this.base.$,this._class.listen()}},{listen:function(){if(this.isListening())return;this.$body=$("body"),this._isListening=!0},isListening:function(){return this._isListening||this.superclass.isListening&&this.superclass.isListening()},listenOnBody:function(){var a=this;this.touch={},this.$body.bind("touchstart",function(b){b=b.originalEvent||b;var c=Date.now(),d=c-(a.touch.last||c);a.touchTimeout&&clearTimeout(a.touchTimeout),a.touch.target=a._targetNode(b.touches[0].target),a.touch.x1=b.touches[0].pageX,a.touch.y1=b.touches[0].pageY,a.touch.last=c;if(d>0&&d<=a.DOUBLE_DELAY){a.touch.isDoubleTap=!0;return}a.touchTimout=setTimeout(function(b){a._testForTouchHold(b)},a.HOLD_DELAY)})},_targetNode:function(a){return"tagName"in a?a:a.parentNode},_direction:function(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"},_testForTouchHold:function(a){var b=this;if(this.touch.last&&Date.now()-this.touch.last>=this.HOLD_DELAY){var c=$.Event("touchhold",{pageX:a.pageX,pageY:a.pageY,stopPropogation:function(){a.originalEvent.stopPropogation()},preventDefault:function(){a.originalEvent.preventDefault()}});$(touch.target).trigger(),this.touch={}}},HOLD_DELAY:750,DOUBLE_DELAY:250,HOLD_TOLERANCE:10}),Wheel.Widgeteria.Link=Wheel.View.subclass({init:function(){this.url=this.$.attr("href"),this.propagate=this.propagate==undefined?!0:this.propagate,this.disabled==undefined&&this.$.attr("disabled")&&(this.disabled=!0)},listen:function(){var a=this;this.$.bind("click",function(b){b.preventDefault(),a.propagate||b.stopPropagation(),a.disabled||a.onClick(b)})},onClick:function(a){}},{cssSelector:"a"}),Wheel.Widgeteria.AjaxLink=Wheel.Widgeteria.Link.subclass({onClick:function(a){this.send()},data:function(){return{}},onSuccess:function(){},onCompletion:function(){},onError:function(){}}),Wheel.Widgeteria.AjaxLink.mixin(Wheel.Mixins.Ajax),Wheel.Widgeteria.Form=Wheel.View.subclass({init:function(){this.url=this.url||this.$.attr("action"),this.httpMethod=this.httpMethod||this.$.attr("method")||"post"},listen:function(){var a=this;this.$.bind("submit",function(b){b.preventDefault(),a.onSubmit(b)})},onSubmit:function(a){},data:function(){var a=this.$.serializeArray(),b={},c;return $.each(a,function(a,c){value=b[c.name],b[c.name]?b[c.name]=b[c.name].push&&b[c.name].push(c.value)||[b[c.name],c.value]:b[c.name]=c.value}),b}},{cssSelector:"form"});